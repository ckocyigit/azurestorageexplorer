@inherits web.Pages.BaseComponent

<Error HasError=@HasError ErrorMessage=@ErrorMessage />

@if (CurrentContainer is null)
{
	<em>Select a container to see the blobs here</em>
}
else
{
	if (Loading){
		<em>Fetching data from @CurrentContainer...</em>	
	}

	if (ShowTable) {

	<table class="ui blue table">
	<thead>
		<tr>
			<th style="min-width: 100px" >@CurrentPath</th>
			<th colspan="2">
				<InputFile OnChange="@LoadFile"/>
			</th>
		</tr>
		<tr>
			<th style="min-width: 100px" >@CurrentPath</th>
			<th>
				<div style="display:flex;justify-content: space-around;">
					<input class="ui button" type="file" @bind="FileInput" placeholder="Upload file..." />
					<input @bind="UploadFolder" placeholder="Upload to folder" />
					<button class="ui button" type="button" @onclick="UploadBlob">Upload</button>
				</div>
			</th>
			<th>
				<div class="ui compact menu">
					<div class="ui simple dropdown item">
						<i class="ellipsis vertical icon"></i>
						<div class="menu">
							<div class="red item" style="color: firebrick !important;" @onclick="DeleteContainer"><i class="trash icon"></i>Delete</div>
						</div>
					</div>
				</div>
			</th>
		</tr>
	</thead>
	<tbody>
		@if (CurrentPath != "")
		{
			<tr>
				<td colspan="3">
					<a class="link" title="Go to parent directory" @onclick="MoveUp">..</a>
				</td>
			</tr>
		}
		
		@foreach (var Folder in AzureContainerFolders)
		{
			<tr>
				<td colspan="3" class="table-text"><a class="link" @onclick="@(e => EnterFolder(e, Folder.Url))">@Folder.Name</a></td>
				<td style="display:none">@Folder.Url</td>
			</tr>
		}

		@foreach (var Blob in AzureContainerBlobs)
		{
			<tr>
			<td colspan="2" class="table-text">@Blob.Name</td>
			<td style="display:none">@Blob.Url</td>
			<td class="">
				<div class="ui compact menu">
					<div class="ui simple dropdown item">
						<i class="ellipsis vertical icon"></i>
						<div class="menu">
							<div class="item"><i class="download icon"></i>Download</div>
							<div class="red item" style="color: firebrick !important;" @onclick="@(e => DeleteBlob(e, Blob.Url))"><i class="trash icon"></i>Delete</div>
						</div>
					</div>
				</div>
			</td>
			</tr>
		}
	</tbody>
	<tfoot>
		<tr>
			<th colspan="3">@FileCount @Plural found</th>
		</tr>
	</tfoot>
</table>

	}

}
 
